[build-system]
requires = ["pdm-pep517"]
build-backend = "pdm.pep517.api"

[project]
name = "ClopHfit"
description = "Cli for fitting macromolecule pH titration or binding assays data e.g. fluorescence spectra."
authors = [
  { name = "daniele arosio", email = "daniele.arosio@cnr.it" },
]
license = "BSD-3-Clause"
readme = "docs/README.md"
requires-python = ">=3.8, <3.12"
version = "0.3.11"
keywords = [
  "svd",
  "ClopHensor",
  "data fitting",
  "pH",
  "macromolecule binding",
  ]
classifiers = [
  "Environment :: Console",
  "Operating System :: OS Independent",
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.8",
  "Programming Language :: Python :: 3.9",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Unix Shell",
  "Intended Audience :: Science/Research",
  "Topic :: Scientific/Engineering",
  "Development Status :: 3 - Alpha"
  ]
# include = ["LICENSE.txt"]
dependencies = [
  "rpy2 >=3.4.5",
  "seaborn >=0.11.2",
  "matplotlib >=3.2",
  "lmfit ==1.0.3",
  "numpy >=1.17",
  "scipy >=1.7.1",
  "pandas >=1.3.3",
  "emcee >=3.1.1",
  "corner >=2.2.1",
  "tqdm >=4.62.3",
  "sympy >=1.9",
  "openpyxl >=3.0.9",
  "click >=8.1.3",
  "xlrd >=2.0.1",
]

[project.urls]
Homepage = "https://github.com/darosio/ClopHfit"
"Bug Tracker" = "https://github.com/darosio/ClopHfit/issues"
Discussions = "https://github.com/darosio/ClopHfit/discussions"
# Source = "https://github.com/unknown/jj"
Changelog = "https://github.com/darosio/ClopHfit/releases"
Documentation = "https://clophfit.readthedocs.io"

# [tool.hatch.envs.default]
# dependencies = [
#   "pytest",
#   "pytest-cov",
# ]

# [tool.pdm.dev-dependencies]
# devtest = ["pytest", "pytest-cov"]

[project.scripts]
"clop" = "clophfit.__main__:clop"

[project.optional-dependencies]
tests = [
  "pytest >=7.0.1",
  "coverage[toml] >=6.1.2",
  "mypy >=0.931",
  "typeguard >=2.13.3",
  "Pygments >=2.10.0",
  # "types-setuptools",
  "xdoctest >=0.15.10",
  "pandas-stubs >=1.5.0.221003",
]
dev = [
    "jupyter >=1.0.0",
    "ipykernel >=6.5.0",
    "ipython >=8.1.0",
    "commitizen>=2.38.0",
]
docs = [
  "Sphinx >=5.0",
  "pydata-sphinx-theme >=0.8.0",
  "sphinx-autodoc-typehints >=1.12.0",
  "nbsphinx >=0.8.8",
  "sphinxcontrib-plantuml >=0.23",
  "myst-parser >=0.18.0",
  "sphinx-click >=4.3.0",
  "autodocsumm >=0.2.9",
]
#   "sphinx-book-theme>=0.1.0",
#   "sphinx_copybutton",

[tool.black]
line-length = 88
skip-string-normalization = false
exclude = '''
/(
    \.git
  | \.hg
  | \.mypy_cache
  | \.tox
  | \.venv
  | _build
  | buck-out
  | build
  | dist
)/
'''

[tool.coverage.paths]
source = ["src", "*/site-packages"]
tests = ["tests", "*/tests"]

[tool.coverage.run]
branch = true
source = ["clophfit", "tests"]
omit = ["*__init__.py"]

[tool.coverage.report]
show_missing = true
# fail_under = 100
exclude_lines = [
    "pragma: no cover",
    "pytest.raises",
    "pytest.warns",
    ]

[tool.isort]
profile = "black"
multi_line_output = 3
force_single_line = true
lines_after_imports = 2
known_first_party="clophfit"

[tool.commitizen]
name = "cz_conventional_commits"
version = "0.3.11"
tag_format = "v$version"
version_files = [
  "pyproject.toml:version",
  "docs/conf.py:release",
  "docs/README.md:Version",
  ]
changelog_incremental = true

# [tool.pytest.ini_options]
# minversion = "6.0"
# addopts = ["-ra", "--showlocals", "--strict-markers", "--strict-config"]
# xfail_strict = true
# filterwarnings = ["error"]
# log_cli_level = "INFO"
# testpaths = [
#   "tests",
# ]

[tool.mypy]
strict = true
warn_unreachable = true
pretty = true
show_column_numbers = true
show_error_codes = true
show_error_context = true
plugins = "numpy.typing.mypy_plugin"
exclude = "src/clophfit/old"
files = ["src", "tests", "docs/conf.py"]
python_version = "3.10"
warn_unused_configs = true
# enable_error_code = ["ignore-without-code", "redundant-expr", "truthy-bool"]
enable_error_code = ["redundant-expr", "truthy-bool"]

[tool.pylsp-mypy]
enabled = true
live_mode = true
dmypy = false
strict = true

[tool.pdm]
