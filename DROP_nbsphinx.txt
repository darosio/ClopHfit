Yes—migrating from nbsphinx → myst-nb first is a good incremental step, and you can keep executing tutorials during make docs.

   Minimal migration plan (keep your existing .ipynb tutorials for now, still executed):

     - In docs/conf.py: remove nbsphinx from extensions, add myst_parser + myst_nb, and set nb_execution_mode = "auto" (or "force" if you always want execution) + a sane nb_execution_timeout.

     - In dependencies (docs extra / dependency-group): add myst-nb and myst-parser (you can keep nbsphinx temporarily during transition, but ideally remove it once build passes).
     - Ensure Sphinx doesn’t treat nbsphinx’ temp artifacts as sources (those .virtual_documents/... files): exclude them (safe even with execution enabled), and in CI prefer a stable Python
   (3.12/3.13) for docs execution to avoid native-build breakage (like your nutpie/clang issue).

   Then “complete setup” (your desired .py:percent authoring in Emacs) can come next: use jupytext pairing so you commit the .py as source-of-truth, generate/refresh .ipynb on demand (locally
   or in CI), and let myst-nb execute the generated .ipynb during docs build.

 > ok let's go. in the meanwhile solve this doubpt: If I will be working in a .ipynb file changing it how the changes will flow back into the source text file?

 ● With Jupytext pairing, the “flow back” is automatic, but only if you enable pairing and then save the notebook.

   How it works

     - Jupytext stores a pairing in notebook metadata (or via config).
     - Once paired, whenever you edit either side:
       - edit .ipynb in Jupyter → Save → Jupytext writes the paired .py (or .md) file
       - edit .py:percent in Emacs → run jupytext --sync notebook.ipynb (or open+save in Jupyter) → it updates the .ipynb

   Typical workflow (your case: source-of-truth = .py:percent)

     - Pair once:

     jupytext --set-formats ipynb,py:percent docs/tutorials/LMfit.ipynb

   This creates/updates docs/tutorials/LMfit.py.

     - Work in .ipynb during development:

     - Open LMfit.ipynb
     - Edit cells
     - Hit Save
     → Jupytext automatically updates LMfit.py in the same folder.

     - Before committing:

     - Ensure outputs are stripped (nbstripout or jupytext options)
     - Commit the .py (and optionally the .ipynb, depending on your policy)

   Key gotchas

     - If pairing is not enabled, nothing flows back.
     - If you edit .ipynb somewhere that doesn’t load the Jupytext extension, you might need to run:

     jupytext --sync docs/tutorials/LMfit.ipynb

   to force writing the paired .py.

   If you want, I can set this repo up so that:

     - each tutorial is paired ipynb <-> py:percent
     - saving the notebook always updates the .py
     - commits automatically strip outputs.

1. consider code-cells.el
2. add jupyter.cache (see gemini)
3. add jupytext conf in pyproject
